(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"921d":function(e,t,i){"use strict";i.r(t);i("a4d3"),i("e01a");var a=function(){var e=this,t=e._self._c;return t("q-page",{},[t("q-header",{class:e.getHeaderColorBrand},[t("q-toolbar",[t("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"eva-arrow-back"}}),t("q-toolbar-title",[e._v("\n       "+e._s(e.formType)+" Kategori\n      ")])],1)],1),t("form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"q-pa-md q-gutter-y-md"},[t("q-select",{attrs:{options:e.parentCategoryOptionsFiltered,"map-options":"","emit-value":"",required:"",filled:"",label:"Parent"},model:{value:e.form.category_id,callback:function(t){e.$set(e.form,"category_id",t)},expression:"form.category_id"}}),t("q-input",{attrs:{required:"",filled:"",label:"Title"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),t("q-input",{attrs:{required:"",filled:"",mask:"####",label:"Urutan"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}}),t("q-input",{attrs:{filled:"",type:"textarea",rows:"3",label:"Deskripsi"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),t("div",{staticClass:"border rounded q-pa-sm"},[t("div",[t("q-toggle",{attrs:{label:"Tampilkan produk di beranda"},model:{value:e.form.is_front,callback:function(t){e.$set(e.form,"is_front",t)},expression:"form.is_front"}}),t("div",{staticClass:"text-xs text-grey-6 q-pa-xs"},[e._v("\n          Pilihan apakah produk dibawah kategori ini akan di listing di halaman beranda\n        ")])],1)]),e.form.category_id?e._e():t("section",{attrs:{id:"image-banner"}},[t("div",{staticClass:"row items-center justify-between"},[t("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Ikon",size:"sm",color:"primary",icon:"eva-upload",type:"button"},on:{click:function(t){return t.preventDefault(),e.selectNewImage.apply(null,arguments)}}}),t("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Banner",size:"sm",color:"teal",icon:"eva-upload",type:"button"},on:{click:function(t){return t.preventDefault(),e.selectNewBanner.apply(null,arguments)}}})],1),e.errors.images?t("div",{staticClass:"text-xs text-red q-my-md"},[e._v(" "+e._s(e.errors.images[0]))]):e._e(),t("div",[t("input",{ref:"image",staticClass:"hidden",attrs:{type:"file"},on:{change:e.updateImagePreview}}),t("input",{ref:"banner",staticClass:"hidden",attrs:{type:"file"},on:{change:e.updateBannerPreview}}),e.imagePreview?t("div",{staticClass:"my-lg"},[t("div",{staticClass:"text-weight-bold text-md"},[e._v("Ikon")]),t("q-list",{attrs:{bordered:""}},[t("q-item",[t("q-item-section",[t("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"80px",height:"auto","object-fit":"contain"},attrs:{src:e.imagePreview}})]),t("q-space"),t("q-item-section",{attrs:{side:""}},[t("q-btn",{attrs:{size:"sm",color:"red",glossy:"",round:"",icon:"eva-trash-2"},on:{click:e.removeImage}})],1)],1)],1)],1):e._e()]),e.bannerPreview?t("div",{staticClass:"my-lg"},[t("div",{staticClass:"text-weight-bold text-md"},[e._v("Banner")]),t("q-list",{attrs:{bordered:""}},[t("q-item",[t("q-item-section",[t("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"200px",height:"auto","object-fit":"contain"},attrs:{src:e.bannerPreview}})]),t("q-space"),t("q-item-section",{attrs:{side:""}},[t("q-btn",{attrs:{size:"sm",color:"red",glossy:"",round:"",icon:"eva-trash-2"},on:{click:e.removeBanner}})],1)],1)],1)],1):e._e()])],1),t("q-footer",{staticClass:"bg-white q-pa-md"},[t("q-btn",{staticClass:"full-width",attrs:{loading:e.loading,type:"submit",label:"Simpan Data",color:"primary"}},[t("q-tooltip",{staticClass:"bg-accent"},[e._v("Simpan Data")])],1)],1)],1)],1)},r=[],s=i("ded3"),o=i.n(s),n=(i("4de4"),i("b0c0"),i("2f62")),c={data:function(){return{category:this.$route.query.edit?this.$store.getters["category/getById"](parseInt(this.$route.query.edit)):"",formType:"Add",form:{id:"",category_id:"",images:"",title:"",description:"",is_front:!0,weight:1,banner:"",remove_banner:!1,remove_image:!1},modal:!1,imagePreview:"",bannerPreview:""}},watch:{"form.category_id":function(e){e&&this.unsetDataCategory()}},computed:o()(o()({},Object(n["d"])({loading:function(e){return e.loading},errors:function(e){return e.errors}})),{},{parentCategoryOptions:function(){return this.$store.getters["category/getParentCategoryOptions"]},parentCategoryOptionsFiltered:function(){var e=this;return this.category?this.parentCategoryOptions.filter((function(t){return t.value!=e.category.id})):[]}}),methods:o()(o()({},Object(n["b"])("category",["categoryStore","getCategories","getCategory","categoryUpdate"])),{},{submit:function(){var e=new FormData;e.append("title",this.form.title),e.append("category_id",this.form.category_id),e.append("description",this.form.description),e.append("images",this.form.images),e.append("banner",this.form.banner),e.append("weight",this.form.weight),e.append("is_front",this.form.is_front),"Edit"==this.formType&&e.append("remove_banner",this.form.remove_banner),"Edit"==this.formType&&e.append("remove_image",this.form.remove_image),"Add"==this.formType&&(e.append("_method","POST"),this.categoryStore(e)),"Edit"==this.formType&&(e.append("_method","PUT"),this.categoryUpdate({id:this.form.id,data:e}))},selectNewImage:function(){this.$refs.image.click()},selectNewBanner:function(){this.$refs.banner.click()},updateImagePreview:function(){var e=this,t=this.$refs.image.files[0];if(t){this.form.images=t;var i=new FileReader;i.onload=function(t){e.imagePreview=t.target.result},i.readAsDataURL(t)}},updateBannerPreview:function(){var e=this,t=this.$refs.banner.files[0];if(t){this.form.banner=t;var i=new FileReader;i.onload=function(t){e.bannerPreview=t.target.result},i.readAsDataURL(t)}},setData:function(){var e;this.form.id=this.category.id,this.form.title=this.category.title,this.form.description=this.category.description?this.category.description:"",this.form.weight=this.category.weight,this.form.category_id=null!==(e=this.category.category_id)&&void 0!==e?e:"",this.form.is_front=this.category.is_front,this.form.is_special=this.category.is_special,this.imagePreview=this.category.src?this.category.src:"",this.bannerPreview=this.category.banner_src?this.category.banner_src:""},clearForm:function(){this.form.id="",this.form.title="",this.form.description="",this.form.weight=1,this.form.is_front=!0,this.form.is_special="",this.form.images="",this.form.banner="",this.form.remove_banner=!1,this.imagePreview="",this.bannerPreview=""},removeImage:function(){this.imagePreview="",this.form.images="",this.form.remove_image=!0},removeBanner:function(){this.bannerPreview="",this.form.banner="",this.form.remove_banner=!0},unsetDataCategory:function(){this.form.banner&&this.removeBanner(),this.form.images&&this.removeImage()}}),created:function(){var e=this;if(this.clearForm(),"CategoryFormEdit"==this.$route.name?(this.formType="Edit",this.category?this.setData():this.getCategory(this.$route.params.category_id).then((function(t){e.category=t.data.results,e.setData()}))):(this.formType="Add",this.category={},this.clearForm()),this.parentCategoryOptions.length<=1)return this.$store.dispatch("category/getCategoriesWithChilds")}},l=c,d=i("2877"),m=i("9989"),g=i("e359"),f=i("65c6"),h=i("9c40"),p=i("6ac5"),u=i("ddd8"),b=i("27f9"),y=i("9564"),v=i("1c1c"),w=i("66e5"),_=i("4074"),q=i("2c91"),C=i("7ff0"),k=i("05c0"),P=i("2eeb"),x=i("eebe"),T=i.n(x),$=Object(d["a"])(l,a,r,!1,null,null,null);t["default"]=$.exports;T()($,"components",{QPage:m["a"],QHeader:g["a"],QToolbar:f["a"],QBtn:h["a"],QToolbarTitle:p["a"],QSelect:u["a"],QInput:b["a"],QToggle:y["a"],QList:v["a"],QItem:w["a"],QItemSection:_["a"],QSpace:q["a"],QFooter:C["a"],QTooltip:k["a"]}),T()($,"directives",{GoBack:P["a"]})}}]);