(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"1ad1":function(t,e,i){"use strict";i("6ab2")},"3dc5":function(t,e,i){"use strict";i.r(e);i("b0c0"),i("a15b"),i("ac1f"),i("1276");var n=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"q-pb-lg bg-grey-1"},[e("q-header",{staticClass:"no-print box-shadow bg-brand"},[e("q-toolbar",[e("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"eva-arrow-back"}}),e("q-toolbar-title",{staticClass:"text-weight-bold brand"},[t.invoice?e("span",[t._v("Invoice "+t._s(t.invoice.order_ref))]):t._e()]),e("q-btn",{attrs:{icon:"print",dense:"",flat:""},on:{click:t.printInvoice}})],1)],1),t.invoice?e("div",{staticClass:"no-print"},[e("div",{staticClass:"q-gutter-y-md"},[e("div",{staticClass:"q-mt-md q-pb-lg bg-white q-py-md q-px-sm"},[e("q-list",{attrs:{dense:""}},[e("q-item",[e("q-item-section",[e("q-item-label",{staticClass:"text-md"},[t._v("Invoice")])],1),e("q-item-section",[e("q-item-label",[t._v("\n                "+t._s(t.invoice.order_ref)+"\n                "),e("q-icon",{staticClass:"q-ml-xs cursor-pointer",attrs:{name:"eva-copy",size:"18px"},on:{click:function(e){return t.copy(t.invoice.order_ref)}}})],1)],1)],1),e("q-item",[e("q-item-section",[t._v("Tanggal Pembelian")]),e("q-item-section",[t._v(t._s(t.invoice.created))])],1),e("q-item",[e("q-item-section",[t._v("Status Pesanan")]),e("q-item-section",[e("q-item-label",[e("span",{staticClass:"q-px-md rounded-borders text-white q-py-xs",class:"bg-".concat(t.getOrderStatusColor(t.invoice.order_status))},[t._v(t._s(t.invoice.status_label))])])],1)],1),e("q-item",[e("q-item-section",[t._v("Status Pembayaran")]),e("q-item-section",[e("q-item-label",[e("span",{staticClass:"q-px-md rounded-borders text-white q-py-xs",class:"bg-".concat(t.getOrderStatusColor(t.invoice.transaction.status))},[t._v(t._s(t.invoice.transaction.status_label))])])],1)],1)],1)],1),e("q-card",{staticClass:"no-print bg-white shadow",attrs:{square:""}},[e("div",{staticClass:"card-heading"},[t._v("Produk Detil")]),e("q-card-section",[e("q-separator",{attrs:{color:"teal q-pt-xs"}}),e("q-list",{attrs:{separator:""}},[e("q-item",{staticClass:"bg-green-1"},[e("q-item-section",[t._v("Produk")]),e("q-item-section",[t._v("Qty")]),e("q-item-section",[t._v("Harga")])],1),t._l(t.invoice.items,(function(i,n){return e("q-item",{key:n},[e("q-item-section",[e("div",{staticClass:"text-md"},[t._v(t._s(i.name))]),e("div",{staticClass:"text-caption tet-grey-6"},[t._v(t._s(i.note))])]),e("q-item-section",[t._v(t._s(i.quantity))]),e("q-item-section",[t._v(t._s(t.moneyIDR(i.price)))])],1)}))],2)],1)],1),e("q-card",{staticClass:"no-print bg-white shadow",attrs:{square:""}},[e("div",{staticClass:"card-heading"},[e("div",[t._v("Info Pengiriman")])]),e("q-card-section",{staticClass:"q-px-sm"},[e("q-list",{attrs:{dense:""}},[e("q-item",[e("q-item-section",[t._v("Penerima")]),e("q-item-section",[t._v(t._s(t.invoice.customer_name))])],1),e("q-item",[e("q-item-section",[t._v("Ponsel")]),e("q-item-section",[t._v(t._s(t.invoice.customer_whatsapp))])],1),e("q-item",[e("q-item-section",[t._v("Alamat")]),e("q-item-section",[e("q-item-label",[e("div",{domProps:{innerHTML:t._s(t.invoice.shipping_address)}})])],1)],1),e("q-item",[e("q-item-section",[t._v("Kurir")]),e("q-item-section",[t._v(t._s(t.invoice.shipping_courier_name)+" "+t._s(t.invoice.shipping_courier_service?" - "+t.invoice.shipping_courier_service:""))])],1),e("q-item",[e("q-item-section",[e("q-item-label",[t._v("No Resi "),t.invoice.shipping_courier_code?e("q-icon",{staticClass:"q-ml-sm cursor-pointer",attrs:{name:"eva-copy",size:"18px"},on:{click:function(e){return t.copy(t.invoice.shipping_courier_code)}}}):t._e()],1)],1),e("q-item-section",[t._v(t._s(t.invoice.shipping_courier_code?t.invoice.shipping_courier_code:"-"))])],1)],1)],1)],1),e("q-card",{staticClass:"no-print bg-white shadow",attrs:{square:""}},[e("div",{staticClass:"card-heading border-b"},[t._v("Rincian Pembayaran")]),e("q-card-section",{staticClass:"q-px-sm"},[e("q-list",{attrs:{dense:""}},[e("q-item",[e("q-item-section",[t._v("Referensi")]),e("q-item-section",[t._v(t._s(t.invoice.transaction.payment_ref))])],1),e("q-item",[e("q-item-section",[t._v("Metode Pembayaran")]),e("q-item-section",[t._v(t._s(t.invoice.transaction.payment_method.split("_").join(" ")))])],1),e("q-item",[e("q-item-section",[t._v("Total Belanja")]),e("q-item-section",[t._v(t._s(t.moneyIDR(t.invoice.order_subtotal)))])],1),e("q-item",[e("q-item-section",[t._v("Total Ongkos Kirim ("+t._s(t.invoice.order_weight)+" gram)")]),e("q-item-section",[t._v(t._s(t.moneyIDR(t.invoice.shipping_cost)))])],1),t.invoice.order_unique_code?e("q-item",[e("q-item-section",[t._v("Kode Unik")]),e("q-item-section",[t._v(t._s(t.invoice.order_unique_code))])],1):t._e(),t.invoice.discount?e("q-item",[e("q-item-section",[t._v("Diskon")]),e("q-item-section",[t._v(t._s(t.moneyIDR(t.invoice.discount)))])],1):t._e(),t.invoice.payment_fee?e("q-item",[e("q-item-section",[t._v("Payment Fee [ "+t._s(t.invoice.transaction.payment_name)+" ]")]),e("q-item-section",[t._v(t._s(t.moneyIDR(t.invoice.payment_fee)))])],1):t._e(),e("q-item",[e("q-item-section",[e("q-item-label",{staticClass:"text-weight-bold q-py-sm text-md"},[t._v("Total Tagihan")])],1),e("q-item-section",[e("q-item-label",{staticClass:"text-weight-bold q-py-sm text-md"},[t._v(t._s(t.moneyIDR(t.invoice.grand_total)))])],1)],1)],1)],1)],1)],1)]):t._e(),e("q-inner-loading",{staticClass:"no-print",attrs:{showing:t.loading}}),t.invoice?e("div",{class:{"no-print":t.isPrintPacking}},[e("div",{staticClass:"print-invoice"},[e("div",{},[e("div",{staticClass:"bg-white"},[e("div",{staticClass:"text-center"},[e("div",{staticClass:"text-weight-bold q-mb-xs",staticStyle:{"font-size":"1.8rem"}},[t._v(t._s(t.shop.name))]),e("div",{staticStyle:{"font-size":"1.1rem"}},[t._v(t._s(t.shop.phone))]),e("div",{staticStyle:{"font-size":"1.1rem"}},[t._v(t._s(t.shop.app_url))])]),e("hr"),e("div",{staticClass:"q-mb-md flex justify-between item-start",staticStyle:{"font-size":"1.1rem"}},[e("table",[e("tr",[e("td",{attrs:{align:"left"}},[t._v("Invocie No")]),e("td",[t._v(":")]),e("td",{attrs:{align:"left"}},[t._v(t._s(t.invoice.order_ref))])]),e("tr",[e("td",{attrs:{align:"left"}},[t._v("Tanggal")]),e("td",[t._v(":")]),e("td",[t._v(t._s(t.invoice.created))])]),e("tr",[e("td",{attrs:{align:"left"}},[t._v("Pembayaran")]),e("td",[t._v(":")]),e("td",[t._v(t._s(t.invoice.transaction.payment_method.split("_").join(" ")))])]),e("tr",[e("td",{attrs:{align:"left"}},[t._v("Status")]),e("td",[t._v(":")]),e("td",[t._v(t._s(t.invoice.transaction.status))])])]),t.qrData?e("div",{},[e("img",{attrs:{src:t.qrData,width:"80",height:"80"}})]):t._e()]),e("hr"),e("div",{staticClass:"flex justify-between items-start",staticStyle:{"font-size":"1.1rem"}},[e("div",{},[e("div",{staticClass:"text-weight-medium q-mb-xs"},[t._v("Pelanggan:")]),e("div",{staticClass:"text-weight-bold"},[t._v(t._s(t.invoice.customer_name))]),e("div",[t._v(t._s(t.invoice.customer_whatsapp))]),e("div",{staticStyle:{"font-size":"1.2rem"},domProps:{innerHTML:t._s(t.invoice.shipping_address)}})])]),e("hr"),e("div",{staticClass:"relative q-pt-xs",staticStyle:{"font-size":"1.1rem"}},[e("div",{staticClass:"text-weight-bold q-my-xs"},[t._v("Detil Pesanan:")]),t.invoice.items?e("table",{staticClass:"table-order-item"},[e("tr",[e("th",{attrs:{align:"left"}},[t._v("Item")]),e("th",{attrs:{align:"left"}},[t._v("qty")]),e("th",{attrs:{align:"right"}},[t._v("Harga")])]),t._l(t.invoice.items,(function(i,n){return e("tr",{key:n},[e("td",{},[e("div",[t._v(t._s(i.name))]),e("div",{staticClass:"text-caption tet-grey-6"},[t._v(t._s(i.note))])]),e("td",[t._v(t._s(i.quantity))]),e("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(i.price)))])])}))],2):t._e(),e("div",{staticClass:"column justify-end items-end q-mt-sm"},[e("table",{staticClass:"dense"},[e("tr",[e("td",{attrs:{align:"right"}},[t._v("Jumlah")]),e("td",[t._v(":")]),e("td",[t._v("Rp")]),e("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.order_subtotal)))])]),e("tr",[e("td",{attrs:{align:"right"}},[t._v("Ongkos Kirim")]),e("td",[t._v(":")]),e("td",[t._v("Rp")]),e("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.shipping_cost)))])]),t.invoice.service_fee?e("tr",[e("td",{attrs:{align:"right"}},[t._v(t._s(t.config.service_fee_label))]),e("td",[t._v(":")]),e("td",[t._v("Rp")]),e("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.service_fee)))])]):t._e(),t.invoice.payment_fee>0?e("tr",[e("td",{attrs:{align:"right"}},[t._v("Jasa Pembayaran "),e("span",{staticClass:"text-xs text-grey-7"},[t._v(" [ "+t._s(t.invoice.transaction.payment_name)+" ] ")])]),e("td",[t._v(":")]),e("td",[t._v("Rp")]),e("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.payment_fee)))])]):t._e(),t.invoice.order_unique_code?e("tr",[e("td",{attrs:{align:"right"}},[t._v("Kode Unik")]),e("td",[t._v(":")]),e("td"),e("td",{attrs:{align:"right"}},[t._v(t._s(t.invoice.order_unique_code))])]):t._e(),t.invoice.discount?e("tr",[e("td",{attrs:{align:"right"}},[t._v("Diskon (-)")]),e("td",{attrs:{align:"right"}},[t._v(":")]),e("td",[t._v("Rp")]),e("td",{attrs:{align:"right"}},[t._v(t._s(t.invoice.discount?t.moneyIDR(t.invoice.discount):0))])]):t._e(),e("tr",[e("th",{attrs:{align:"right"}},[t._v("Total Bayar")]),e("th",{attrs:{align:"right"}},[t._v(":")]),e("th",[t._v("Rp")]),e("th",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.grand_total)))])])])])])])])])]):t._e(),t.invoice?e("div",{class:{"no-print":t.isPrintInvoice}},[e("div",{staticClass:"print-packing"},[e("div",{staticClass:"bg-white"},[e("div",{staticClass:"text-center"},[e("div",{staticClass:"text-weight-bold q-mb-xs",staticStyle:{"font-size":"1rem"}},[t._v(t._s(t.shop.name))]),e("div",{},[t._v(t._s(t.shop.phone))]),e("div",{staticClass:"text-xs",domProps:{innerHTML:t._s(t.shop.address)}})]),e("div",{staticClass:"flex justify-between q-mb-sm"},[e("div",{},[e("div",{staticClass:"text-weight-medium q-mb-xs text-weight-bold"},[t._v("Tujuan:")]),e("div",[t._v(t._s(t.invoice.customer_name))]),e("div",[t._v(t._s(t.invoice.customer_whatsapp))]),e("div",{domProps:{innerHTML:t._s(t.invoice.shipping_address)}})])]),e("div",[e("div",{staticClass:"q-mb-xs text-weight-bold"},[t._v("Detil Pesanan")]),t.invoice.items?e("table",{staticClass:"table-order-item"},[e("tr",[e("th",{attrs:{align:"left"}},[t._v("Item")]),e("th",{attrs:{align:"left"}},[t._v("qty")])]),t._l(t.invoice.items,(function(i,n){return e("tr",{key:n},[e("td",{},[e("div",[t._v(t._s(i.name))]),e("div",{staticClass:"text-caption tet-grey-6"},[t._v(t._s(i.note))])]),e("td",[t._v(t._s(i.quantity))])])}))],2):t._e()])])])]):t._e()],1)},s=[],a=i("ded3"),o=i.n(a),r=(i("99af"),i("5319"),i("2ca0"),i("cdde")),c=i("2f62"),d=i("d055"),v=i.n(d),_={name:"InvoiceIndex",data:function(){return{modalPayment:!1,throtle:1,isPrintPacking:!1,isPrintInvoice:!1,timeout:null,qrData:""}},computed:o()(o()({},Object(c["d"])({loading:function(t){return t.loading},shop:function(t){return t.shop},invoice:function(t){return t.order.invoice},config:function(t){return t.config}})),{},{isPaid:function(){return"PAID"==this.invoice.transaction.status},isPaymentType:function(){return"DIRECT"==this.invoice.transaction.payment_type?"DirectPayment":"PaymentGateway"}}),created:function(){this.getOrder()},methods:o()(o()({},Object(c["b"])("order",["getOrderByRef"])),{},{generateQr:function(){var t=this,e={errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:1};v.a.toDataURL(this.getRoutePath(),e,(function(e,i){if(e)throw e;t.qrData=i}))},getRoutePath:function(){var t=this.$router.resolve({name:"UserInvoice",params:{order_ref:this.invoice.order_ref}});return location.origin+t.href},getOrder:function(){var t=this;this.$store.commit("SET_LOADING",!0),this.$route.params.order_ref?this.getOrderByRef(this.$route.params.order_ref).then((function(e){200==e.status&&(t.$store.commit("order/SET_INVOICE",e.data.results),setTimeout((function(){t.generateQr()}),1e3)),t.$store.commit("SET_LOADING",!1),t.checkOrderStatus()})).catch((function(){t.$router.push({name:"Cart"})})):this.$router.push({name:"Cart"})},money:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t)},chatToAdmin:function(){var t="Halo ".concat(this.shop.name,",\nMohon pesanan saya untuk segera di proses.\nTerima Kasih.\n\nReferensi Order:\n").concat(location.href),e="https://api.whatsapp.com/send?phone=".concat(this.formatPhoneNumber(this.shop.phone),"&text=").concat(encodeURI(t));window.open(e,"_blank")},kirimBuktiTransfer:function(){this.modalPayment=!1;var t="Halo ".concat(this.shop.name,",\nKonfirmasi pembayaran atas pesanan:\n*INVOICE ").concat(this.invoice.order_ref,"*\n\nReferensi Order:\n").concat(location.href,"\n\nBerikut saya sertakan bukti transfer."),e="https://api.whatsapp.com/send?phone=".concat(this.formatPhoneNumber(this.shop.phone),"&text=").concat(encodeURI(t));window.open(e,"_blank")},formatPhoneNumber:function(t){var e=t.replace(/\D/g,"");return e.startsWith("0")&&(e="62"+e.substr(1)),e},copy:function(t){var e=this;Object(r["a"])(t).then((function(){e.$q.notify({type:"positive",message:"Berhasil menyalin"})})).catch((function(){e.$q.notify({type:"negative",message:"Browser anda tidak support copy to clipboard"})}))},handlePaymentModal:function(){this.modalPayment=!0},getCheckOrder:function(){var t=this;this.getOrderByRef(this.$route.params.order_ref).then((function(e){200==e.status&&(t.$store.commit("order/SET_INVOICE",e.data.results),t.checkOrderStatus())}))},checkOrderStatus:function(){var t=this;"PAYMENT_GATEWAY"==this.invoice.transaction.payment_type&&"PENDING"==this.invoice.order_status?this.timeout=setTimeout((function(){t.getCheckOrder()}),15e3):clearTimeout(this.timeout)},copyAddress:function(){var t="".concat(this.invoice.customer_name,"\n").concat(this.invoice.customer_whatsapp,"\n").concat(this.invoice.shipping_address);this.copy(t)},printInvoice:function(){this.qrData||this.generateQr();var t=(new Date).toDateString();document.title="INVOICE #".concat(this.invoice.order_ref," ").concat(t),this.isPrintPacking=!1,this.isPrintInvoice=!0,setTimeout((function(){window.print()}),200)},printPacking:function(){var t=(new Date).toDateString();document.title="PACKING #".concat(this.invoice.order_ref," ").concat(t),this.isPrintPacking=!0,this.isPrintInvoice=!1,setTimeout((function(){window.print()}),200)}}),beforeDestroy:function(){clearTimeout(this.timeout)}},m=_,l=(i("1ad1"),i("2877")),h=i("9989"),u=i("e359"),p=i("65c6"),g=i("9c40"),q=i("6ac5"),f=i("f20b"),y=i("1c1c"),b=i("66e5"),C=i("4074"),w=i("0016"),x=i("0170"),P=i("f09f"),I=i("a370"),k=i("eb85"),D=i("74f7"),T=i("2eeb"),R=i("eebe"),O=i.n(R),S=Object(l["a"])(m,n,s,!1,null,null,null);e["default"]=S.exports;O()(S,"components",{QPage:h["a"],QHeader:u["a"],QToolbar:p["a"],QBtn:g["a"],QToolbarTitle:q["a"],QBtnDropdown:f["a"],QList:y["a"],QItem:b["a"],QItemSection:C["a"],QIcon:w["a"],QItemLabel:x["a"],QCard:P["a"],QCardSection:I["a"],QSeparator:k["a"],QInnerLoading:D["a"]}),O()(S,"directives",{GoBack:T["a"]})},"6ab2":function(t,e,i){}}]);